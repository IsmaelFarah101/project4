import unittest
from unittest import TestCase
from unittest.mock import patch, call
import event_api
import restaurant_api

class TestEvent(TestCase):

    @patch('event_api.getEventData')
    def test_get_data_for_events(self, mock_events):
        keyword = 'Music'
        location = 'Minneapolis'
        test_api = [{'watching_count': None, 'olson_path': 'America/Chicago', 'calendar_count': None, 'comment_count': None, 'region_abbr': 'IL'}]
        mock_events.side_effect = [test_api]

        self.assertEqual(event_api.getEventData(location,keyword),test_api)
    
class TestRestaurant(TestCase):

    @patch('restaurant_api.getRestaurantData')
    def test_get_data_for_restaurants(self, mock_restaurants):
        location = 'Minnneapolis'
        test_api = [{'id': 'g5a0aHSduNzGtbzc8Z1NqA', 'alias': 'cahill-bistro-edina', 'name': 'Cahill Bistro', 'image_url': 'https://s3-media3.fl.yelpcdn.com/bphoto/epzJdXFzxMukZAVP4xw5Hw/o.jpg', 'is_closed': False, 'url': 'https://www.yelp.com/biz/cahill-bistro-edina?adjust_creative=6lBIe4vS3pWbargo63h4zA&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=6lBIe4vS3pWbargo63h4zA', 'review_count': 136, 'categories': [{'alias': 'latin', 'title': 'Latin American'}], 'rating': 5.0, 'coordinates': {'latitude': 44.874884, 'longitude': -93.362744}, 'transactions': [], 'price': '$$', 'location': {'address1': '7078 Amundson Ave', 'address2': None, 'address3': '', 'city': 'Edina', 'zip_code': '55439', 'country': 'US', 'state': 'MN', 'display_address': ['7078 Amundson Ave', 'Edina, MN 55439']}, 'phone': '+19524264196', 'display_phone': '(952) 426-4196', 'distance': 11584.477528685557}, {'id': 'tiXUs4dvnrP6EhrvX5Yl_Q', 'alias': 'town-talk-diner-and-gastropub-minneapolis', 'name': 'Town Talk Diner & Gastropub', 'image_url': 'https://s3-media1.fl.yelpcdn.com/bphoto/-7o1CBi9bqrVII1nEwxlzQ/o.jpg', 'is_closed': False, 'url': 'https://www.yelp.com/biz/town-talk-diner-and-gastropub-minneapolis?adjust_creative=6lBIe4vS3pWbargo63h4zA&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=6lBIe4vS3pWbargo63h4zA', 'review_count': 200, 'categories': [{'alias': 'newamerican', 'title': 'American (New)'}, {'alias': 'gastropubs', 'title': 'Gastropubs'}, {'alias': 'cocktailbars', 'title': 'Cocktail Bars'}], 'rating': 5.0, 'coordinates': {'latitude': 44.9481, 'longitude': -93.23273}, 'transactions': [], 'price': '$$', 'location': {'address1': '2707 E Lake St', 'address2': '', 'address3': None, 'city': 'Minneapolis', 'zip_code': '55406', 'country': 'US', 'state': 'MN', 'display_address': ['2707 E Lake St', 'Minneapolis, MN 55406']}, 'phone': '+16123535398', 'display_phone': '(612) 353-5398', 'distance': 4932.799650363013}, {'id': '4oL0I39z4lMwkU6MP8HAXw', 'alias': 'catrinas-cerveza-and-mexican-grill-oakdale', 'name': 'Catrinas Cerveza & Mexican Grill', 'image_url': 'https://s3-media2.fl.yelpcdn.com/bphoto/oF8pHX_rgWnjXYmjvYVoIg/o.jpg', 'is_closed': False, 'url': 'https://www.yelp.com/biz/catrinas-cerveza-and-mexican-grill-oakdale?adjust_creative=6lBIe4vS3pWbargo63h4zA&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=6lBIe4vS3pWbargo63h4zA', 'review_count': 295, 'categories': [{'alias': 'mexican', 'title': 'Mexican'}], 'rating': 4.5, 'coordinates': {'latitude': 44.9640945150541, 'longitude': -92.9837788976917}, 'transactions': ['pickup', 'delivery'], 'price': '$', 'location': {'address1': '1091 Geneva Ave N', 'address2': None, 'address3': '', 'city': 'Oakdale', 'zip_code': '55128', 'country': 'US', 'state': 'MN', 'display_address': ['1091 Geneva Ave N', 'Oakdale, MN 55128']}, 'phone': '+16514939156', 'display_phone': '(651) 493-9156', 'distance': 24124.334069624303}, {'id': 'kLIRGu0p-j8ilVO-SfkWZw', 'alias': 'lands-end-pasty-company-minneapolis', 'name': 'Lands End Pasty Company', 'image_url': 'https://s3-media2.fl.yelpcdn.com/bphoto/enficcKNrAXrofjRaDNmUA/o.jpg', 'is_closed': False, 'url': 'https://www.yelp.com/biz/lands-end-pasty-company-minneapolis?adjust_creative=6lBIe4vS3pWbargo63h4zA&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=6lBIe4vS3pWbargo63h4zA', 'review_count': 121, 'categories': [{'alias': 'british', 'title': 'British'}, {'alias': 'comfortfood', 'title': 'Comfort Food'}], 'rating': 5.0, 'coordinates': {'latitude': 44.980361, 'longitude': -93.236702}, 'transactions': ['pickup'], 'price': '$', 'location': {'address1': '1316 4th St SE', 'address2': 'Ste 7', 'address3': '', 'city': 'Minneapolis', 'zip_code': '55414', 'country': 'US', 'state': 'MN', 'display_address': ['1316 4th St SE', 'Ste 7', 'Minneapolis, MN 55414']}, 'phone': '+16123154175', 'display_phone': '(612) 315-4175', 'distance': 4532.7782673571965}, {'id': 'obGYBRdwn8gH02fNqKLb9w', 'alias': 'hawaii-poke-bowl-eagan', 'name': 'Hawaii Poke Bowl', 'image_url': 'https://s3-media2.fl.yelpcdn.com/bphoto/n4g8BAFN1DZyxv32kfrSgw/o.jpg', 'is_closed': False, 'url': 'https://www.yelp.com/biz/hawaii-poke-bowl-eagan?adjust_creative=6lBIe4vS3pWbargo63h4zA&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=6lBIe4vS3pWbargo63h4zA', 'review_count': 50, 'categories': [{'alias': 'poke', 'title': 'Poke'}, {'alias': 'sushi', 'title': 'Sushi Bars'}, {'alias': 'hawaiian', 'title': 'Hawaiian'}], 'rating': 5.0, 'coordinates': {'latitude': 44.8361676, 'longitude': -93.1701703}, 'transactions': ['pickup', 'delivery'], 'price': '$$', 'location': {'address1': '3345 Central Park Commons Dr', 'address2': 'Ste 120', 'address3': '', 'city': 'Eagan', 'zip_code': '55121', 'country': 'US', 'state': 'MN', 'display_address': ['3345 Central Park Commons Dr', 'Ste 120', 'Eagan, MN 55121']}, 'phone': '+16513302312', 'display_phone': '(651) 330-2312', 'distance': 17208.60999778478}]
        mock_restaurants.side_effect = [test_api]
        self.assertEqual(restaurant_api.getRestaurantData(location),test_api)

if __name__ == '__main__':
    unittest.main()   